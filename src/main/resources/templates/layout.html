<!doctype html>
<html lang="en" data-theme="caramellatte" th:fragment="layout(content)">
  <head>
    <meta charset="utf-8" />
    <title>htmx Demo</title>

    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link th:href="@{/public/app.css}" rel="stylesheet" />
    <script defer th:src="@{/webjars/htmx.org/dist/htmx.min.js}"></script>
    <script defer th:src="@{/webjars/hyperscript.org/dist/_hyperscript.min.js}"></script>

    <!-- CSRF for Spring Security -->
    <script>
      document.addEventListener('htmx:configRequest', (evt) => {
        const csrfCookie = document.cookie.split('; ').find((c) => c.startsWith('XSRF-TOKEN='));
        if (csrfCookie) {
          const token = decodeURIComponent(csrfCookie.split('=')[1]);
          evt.detail.headers['X-XSRF-TOKEN'] = token;
        }
      });
    </script>
  </head>
  <body>
    <div th:replace="${content}"></div>
  </body>
</html>
