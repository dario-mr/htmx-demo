<!doctype html>
<html lang="en" data-theme="caramellatte" th:fragment="layout(content)">
  <head>
    <meta charset="utf-8" />
    <title>htmx Demo</title>

    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link th:href="@{/public/app.css}" rel="stylesheet" />
    <script defer th:src="@{/webjars/htmx.org/dist/htmx.min.js}"></script>
    <script defer th:src="@{/webjars/hyperscript.org/dist/_hyperscript.min.js}"></script>

    <!-- CSRF for Spring Security -->
    <meta name="_csrf" th:content="${_csrf.token}" />
    <meta name="_csrf_header" th:content="${_csrf.headerName}" />
    <script>
      document.addEventListener('htmx:configRequest', (evt) => {
        const token = document.querySelector('meta[name="_csrf"]')?.content;
        const header = document.querySelector('meta[name="_csrf_header"]')?.content;
        if (token && header) {
          evt.detail.headers[header] = token;
        }
      });
    </script>
  </head>
  <body class="p-6">
    <div th:replace="${content}"></div>
  </body>
</html>
